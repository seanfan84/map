<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script src='js/knockout-3.4.2.js'></script>
</head>
<body>
	<div id="map">MAP</div>
	<div id="list">
		<h3>Sean Favourate</h3>
		<input id="search" class="inputbar" data-bind="" placeholder="search">
		<input id="filter" class="inputbar" data-bind="{textInput:filter}" type="" name="" placeholder="filter">
		<div style="height:1em" data-bind="text:filter"> </div>
		<div data-bind="foreach:places">
			<div id="" class="label" data-bind="text:$index()+1+'.' + name, attr: {id:$index()},visible:visible" onload="console.log(1)" onclick = "clickLabel(this)" onmouseover="overLabel(this)" onmouseleave="leaveLable(this)">
			</div>
		</div>
	</div>
	<div id="pano" class="pano"></div>


	<script src='js/app.js' async defer></script>
	<script src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyB7SJJaAkmrUYuGUurw8zSPB1lvEKG43cE&callback=initMap" async defer></script>
	<script async defer>
		var map = null;
		var infos = [];

		// Error Handling: Download Google Map Library
		var checkGoogleLibrary = setTimeout(function(){
			if(!window.google)window.alert("Unable to connect to google, check network")
		},5000)
		// Error Handling: lost internet
		// Not required once library is downloaded

		function initMap() {

			ViewModel.makeMarkers()
			map = new google.maps.Map(document.getElementById('map'), {
				zoom: 12,
				center: home,
				scrollwheel: false,
				streetViewControl:false,
				mapTypeControl:false
			});
			var input = document.getElementById("search")
			var autocomplete = new google.maps.places.Autocomplete(input);
			autocomplete.bindTo("bounds",map)
			var marker = new google.maps.Marker({
				position: home,
				map: map,
				label: "H"
			});

			ViewModel.markers.forEach(function(marker){
				marker.setMap(map)
			});
		}
		function clickLabel(obj){
			// confirm(obj.id)
			var marker = ViewModel.markers[obj.id]
			ViewModel.selectMarker(marker)
			obj.className = "lable mouseclick"
			setTimeout(function(){
				obj.className = "lable mouseover"
			},100)
		}
		function overLabel(obj){
			var marker = ViewModel.markers[obj.id]
			ViewModel.selectMarker(marker)
			console.log(obj.class)
			obj.className = "label mouseover"
		}
		function leaveLable(obj){
			var marker = ViewModel.markers[obj.id]
			marker.setAnimation(null)
			obj.className = "label"
		}


	</script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</body>
</html>